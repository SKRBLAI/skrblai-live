# ============================================================================
# SKRBL AI Platform - Environment Variables
# ============================================================================
# Copy this file to .env.local for local development
# See docs/DEVELOPER_ONBOARDING.md for setup instructions
# Last updated: 2025-10-31 (from system audit)
# ============================================================================

# ----------------------------------------------------------------------------
# CORE APPLICATION
# ----------------------------------------------------------------------------
NODE_ENV=development
NEXT_PUBLIC_BASE_URL=http://localhost:3000
NEXT_PUBLIC_SITE_URL=http://localhost:3000

# ----------------------------------------------------------------------------
# SUPABASE - LEGACY INSTANCE (Original/Default)
# ----------------------------------------------------------------------------
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Database (optional, for migrations)
SUPABASE_DB_URL=postgresql://postgres:[password]@db.project.supabase.co:5432/postgres
SUPABASE_DATABASE_PASSWORD=your_db_password

# ----------------------------------------------------------------------------
# SUPABASE - BOOST INSTANCE (New/Optional)
# ----------------------------------------------------------------------------
# Only required if FF_USE_BOOST_FOR_AUTH=1
NEXT_PUBLIC_SUPABASE_URL_BOOST=https://your-boost-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY_BOOST=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_ROLE_KEY_BOOST=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# ----------------------------------------------------------------------------
# AUTHENTICATION FLAGS
# ----------------------------------------------------------------------------
# Choose ONE auth system (set to '1' to enable):
NEXT_PUBLIC_FF_CLERK=0                    # Clerk auth (prepared, not implemented)
FF_USE_BOOST_FOR_AUTH=0                   # Supabase Boost auth
# (If both are 0, uses Legacy Supabase auth)

# Clerk Configuration (if FF_CLERK=1)
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_...
CLERK_SECRET_KEY=sk_test_...

# ----------------------------------------------------------------------------
# FEATURE FLAGS - AUTH & CORE FEATURES
# ----------------------------------------------------------------------------
NEXT_PUBLIC_ENABLE_STRIPE=1               # Global Stripe toggle
NEXT_PUBLIC_ENABLE_BUNDLES=0              # Legacy bundle pricing (deprecated)
NEXT_PUBLIC_ENABLE_ORBIT=0                # 3D orbit visualization (heavy)
NEXT_PUBLIC_ENABLE_LEGACY=0               # Legacy system features

# ----------------------------------------------------------------------------
# FEATURE FLAGS - PERCY AI SYSTEM (8 flags)
# ----------------------------------------------------------------------------
NEXT_PUBLIC_SHOW_PERCY_WIDGET=0           # Percy widget visibility
NEXT_PUBLIC_USE_OPTIMIZED_PERCY=0         # ⚠️ Set to 1 for better performance
NEXT_PUBLIC_ENABLE_PERCY_ANIMATIONS=1     # Percy animations
NEXT_PUBLIC_ENABLE_PERCY_AVATAR=1         # Percy avatar display
NEXT_PUBLIC_ENABLE_PERCY_CHAT=1           # Percy chat functionality
NEXT_PUBLIC_ENABLE_PERCY_SOCIAL_PROOF=1   # Social proof elements
NEXT_PUBLIC_PERCY_PERFORMANCE_MONITORING=1 # Performance tracking
NEXT_PUBLIC_PERCY_AUTO_FALLBACK=1         # Auto fallback to legacy
NEXT_PUBLIC_PERCY_LOG_SWITCHES=1          # Debug logging

# ----------------------------------------------------------------------------
# FEATURE FLAGS - UI & UX
# ----------------------------------------------------------------------------
NEXT_PUBLIC_HP_GUIDE_STAR=1               # Homepage guide star
NEXT_PUBLIC_HOMEPAGE_HERO_VARIANT=scan-first  # Options: scan-first, split, legacy
NEXT_PUBLIC_AI_AUTOMATION_HOMEPAGE=1      # AI automation features
NEXT_PUBLIC_ENHANCED_BUSINESS_SCAN=1      # Enhanced business scan
NEXT_PUBLIC_URGENCY_BANNERS=1             # Urgency banners
NEXT_PUBLIC_LIVE_METRICS=1                # Live metrics/counters
NEXT_PUBLIC_REFAC_HOMEPAGE=1              # Homepage refactor
NEXT_PUBLIC_DEBUG_TOOLS=0                 # Debug pages (set to 1 in dev only)

# ----------------------------------------------------------------------------
# FEATURE FLAGS - PAYMENTS
# ----------------------------------------------------------------------------
NEXT_PUBLIC_FF_STRIPE_FALLBACK_LINKS=0    # Use Payment Links vs Checkout Sessions

# ----------------------------------------------------------------------------
# N8N AUTOMATION SYSTEM (57 integration points)
# ----------------------------------------------------------------------------
# CRITICAL: FF_N8N_NOOP=1 disables all n8n webhooks (prevents blocking)
FF_N8N_NOOP=1                              # Set to 0 to enable n8n (default: 1)

# n8n Instance
N8N_BASE_URL=https://skrblai.app.n8n.cloud
N8N_WEBHOOK_BASE_URL=https://skrblai.app.n8n.cloud
N8N_API_BASE_URL=https://skrblai.app.n8n.cloud/api/v1
N8N_API_KEY=your_n8n_api_key

# n8n Workflow URLs (webhooks)
N8N_BUSINESS_ONBOARDING_URL=https://skrblai.app.n8n.cloud/webhook/business-onboarding
N8N_WEBHOOK_FREE_SCAN=https://skrblai.app.n8n.cloud/webhook/skillsmith/free-scan
N8N_STRIPE_WEBHOOK_URL=https://skrblai.app.n8n.cloud/webhook/stripe-payment
N8N_WEBHOOK_ALERTS=https://skrblai.app.n8n.cloud/webhook/alerts

# n8n Workflow IDs (for direct triggering)
N8N_WORKFLOW_PUBLISH_BOOK=workflow_id_here
N8N_WORKFLOW_SEND_PROPOSAL=workflow_id_here
N8N_WORKFLOW_SYNC_CONTENT=workflow_id_here
N8N_WORKFLOW_ONBOARD_USER=workflow_id_here

# n8n Rate Limiting
N8N_DAILY_LIMIT=1000
N8N_MONTHLY_LIMIT=10000
N8N_CONCURRENT_LIMIT=5

# ----------------------------------------------------------------------------
# STRIPE PAYMENT SYSTEM
# ----------------------------------------------------------------------------
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
STRIPE_API_VERSION=2023-10-16

# Stripe Price IDs - Sports Plans (Monthly)
NEXT_PUBLIC_STRIPE_PRICE_SPORTS_STARTER_M=price_xxx
NEXT_PUBLIC_STRIPE_PRICE_SPORTS_PRO_M=price_xxx
NEXT_PUBLIC_STRIPE_PRICE_SPORTS_ELITE_M=price_xxx

# Stripe Price IDs - Business Plans (Monthly)
NEXT_PUBLIC_STRIPE_PRICE_BIZ_STARTER_M=price_xxx
NEXT_PUBLIC_STRIPE_PRICE_BIZ_PRO_M=price_xxx
NEXT_PUBLIC_STRIPE_PRICE_BIZ_ELITE_M=price_xxx

# Stripe Price IDs - Sports Add-ons
NEXT_PUBLIC_STRIPE_PRICE_SPORTS_ADDON_VIDEO=price_xxx
NEXT_PUBLIC_STRIPE_PRICE_SPORTS_ADDON_EMOTION=price_xxx
NEXT_PUBLIC_STRIPE_PRICE_SPORTS_ADDON_NUTRITION=price_xxx
NEXT_PUBLIC_STRIPE_PRICE_SPORTS_ADDON_FOUNDATION=price_xxx

# Stripe Price IDs - Business Add-ons
NEXT_PUBLIC_STRIPE_PRICE_BIZ_ADDON_ADV_ANALYTICS=price_xxx
NEXT_PUBLIC_STRIPE_PRICE_BIZ_ADDON_AUTOMATION=price_xxx
NEXT_PUBLIC_STRIPE_PRICE_BIZ_ADDON_TEAM_SEAT=price_xxx

# Stripe Payment Links (if FF_STRIPE_FALLBACK_LINKS=1)
NEXT_PUBLIC_STRIPE_LINK_SPORTS_STARTER=https://buy.stripe.com/xxx
NEXT_PUBLIC_STRIPE_LINK_SPORTS_PRO=https://buy.stripe.com/xxx
NEXT_PUBLIC_STRIPE_LINK_SPORTS_ELITE=https://buy.stripe.com/xxx
NEXT_PUBLIC_STRIPE_LINK_BIZ_ROOKIE=https://buy.stripe.com/xxx
NEXT_PUBLIC_STRIPE_LINK_BIZ_PRO=https://buy.stripe.com/xxx
NEXT_PUBLIC_STRIPE_LINK_BIZ_ALL_STAR=https://buy.stripe.com/xxx

# Note: 50+ additional price IDs may be needed. See lib/stripe/priceResolver.ts
# for complete list. Consider loading from database instead.

# ----------------------------------------------------------------------------
# AI & MACHINE LEARNING
# ----------------------------------------------------------------------------
# OpenAI (Percy chat, agent system)
OPENAI_API_KEY=sk-...

# Pinecone (Vector DB for RAG)
PINECONE_API_KEY=your_pinecone_api_key
PINECONE_ENVIRONMENT=gcp-starter
PINECONE_CONTROLLER_HOST_URL=https://controller.gcp-starter.pinecone.io
PINECONE_INDEX_NAME=skrbl-knowledge-base

# ----------------------------------------------------------------------------
# COMMUNICATION SERVICES
# ----------------------------------------------------------------------------
# Resend (Email)
RESEND_API_KEY=re_...

# Twilio (SMS)
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=your_auth_token
TWILIO_PHONE_NUMBER=+1234567890
VIP_SMS_WHITELIST=+1234567890,+0987654321

# ----------------------------------------------------------------------------
# MONITORING & ANALYTICS
# ----------------------------------------------------------------------------
# Sentry (Error Tracking)
NEXT_PUBLIC_SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx
SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx
SENTRY_ORG=skrbl-ai
SENTRY_PROJECT=skrbl-platform

# Google Analytics
NEXT_PUBLIC_GOOGLE_ANALYTICS_ID=G-XXXXXXXXXX
GOOGLE_SITE_VERIFICATION=your_verification_code

# Internal Analytics
NEXT_PUBLIC_ENABLE_ANALYTICS=1

# ----------------------------------------------------------------------------
# REDIS (Optional - for queues)
# ----------------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ----------------------------------------------------------------------------
# FOUNDER & VIP SYSTEM
# ----------------------------------------------------------------------------
# IRA Agent Access Control
IRA_ALLOWED_EMAILS=founder@example.com,admin@example.com

# Creator Role Emails
CREATOR_EMAILS=creator1@example.com,creator2@example.com

# Founder Codes (comma-separated)
FOUNDER_CODES=FOUNDER2024,EARLYACCESS

# ----------------------------------------------------------------------------
# ADMIN & INTERNAL
# ----------------------------------------------------------------------------
ADMIN_ENV_READ_KEY=your_admin_secret
INTERNAL_API_KEY=your_internal_api_key

# Admin allowed origins
ALLOWED_ORIGINS=http://localhost:3000,https://skrblai.io

# ----------------------------------------------------------------------------
# TESTING & DEVELOPMENT
# ----------------------------------------------------------------------------
# Playwright (E2E Tests)
PLAYWRIGHT_BASE_URL=http://localhost:3000
CI=0  # Set to 1 in CI environment

# Development Features
NEXT_DISABLE_IMAGE_OPTIMIZATION=0  # Set to 1 for faster dev builds
ANALYZE_BUNDLE=0                   # Set to 1 to analyze bundle size

# reCAPTCHA (optional)
NEXT_PUBLIC_RECAPTCHA_SITE_KEY=6LeXXX...
RECAPTCHA_SECRET_KEY=6LeXXX...

# ----------------------------------------------------------------------------
# MCP SERVER (Separate Service)
# ----------------------------------------------------------------------------
MCP_SERVER_PORT=3001
MCP_SERVER_ALLOWED_ORIGINS=http://localhost:3000

# ----------------------------------------------------------------------------
# NEXTAUTH (DEPRECATED - Will be removed)
# ----------------------------------------------------------------------------
# IMPORTANT: NextAuth is deprecated. Remove these after auth migration.
# NEXTAUTH_URL=http://localhost:3000
# NEXTAUTH_SECRET=deprecated

# ----------------------------------------------------------------------------
# NOTES & WARNINGS
# ----------------------------------------------------------------------------
# 1. Never commit this file with real values to git
# 2. Use .env.local for local development (gitignored)
# 3. Use proper secrets management in production
# 4. FF_N8N_NOOP=1 by default prevents n8n downtime from blocking users
# 5. Set NEXT_PUBLIC_USE_OPTIMIZED_PERCY=1 for better performance
# 6. Only one auth system should be active at a time
# 7. Stripe price IDs should ideally be loaded from database (see audit)
# 8. Debug routes are gated by NODE_ENV in production

# For more information, see:
# - /CODEBASE_AUDIT_REPORT.md - Complete system audit
# - /docs/SKRBL_SYSTEM_AUDIT.md - Visual architecture
# - /docs/DEPRECATION_CHECKLIST.md - Known issues & cleanup
# - /docs/DEVELOPER_ONBOARDING.md - Setup guide
