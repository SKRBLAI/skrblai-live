{
  "extends": [
    "next/core-web-vitals",
    "eslint:recommended",
    "./.eslintrc.cjs"
  ],
  "rules": {
    "no-direct-stripe-new": "error",
    "no-module-scope-supabase": "error",
    "no-unused-vars": "off",
    "no-undef": "error",
    "react/no-unescaped-entities": "off",
    "@next/next/no-img-element": "off",
    "jsx-a11y/alt-text": "warn",
    "jsx-a11y/aria-props": "warn",
    "jsx-a11y/aria-proptypes": "warn",
    "jsx-a11y/aria-unsupported-elements": "warn",
    "jsx-a11y/role-has-required-aria-props": "warn",
    "jsx-a11y/role-supports-aria-props": "warn",
    "no-restricted-imports": [
      "error",
      {
        "paths": [
          {
            "name": "utils/supabase",
            "message": "Use @/lib/supabase canonical helpers instead"
          },
          {
            "name": "utils/supabase-helpers",
            "message": "Use @/lib/supabase canonical helpers instead"
          },
          {
            "name": "@/utils/supabase",
            "message": "Use @/lib/supabase canonical helpers instead"
          },
          {
            "name": "@/utils/supabase-helpers",
            "message": "Use @/lib/supabase canonical helpers instead"
          }
        ],
        "patterns": [
          {
            "group": ["**/app/api/**"],
            "message": "CRITICAL: Do NOT import from app/api/** in pages/components. This causes build-time env explosion. Extract shared code to lib/shared/** instead."
          },
          {
            "group": ["@supabase/supabase-js"],
            "importNames": ["createClient"],
            "message": "Direct @supabase/supabase-js imports are not allowed outside of lib/supabase/**. Use getBrowserSupabase(), getServerSupabaseAnon(), or getServerSupabaseAdmin() from @/lib/supabase instead."
          },
          {
            "group": ["stripe"],
            "importNames": ["default", "Stripe"],
            "message": "Direct Stripe imports are not allowed outside of lib/stripe/**. Use requireStripe() or getOptionalStripe() from @/lib/stripe/stripe instead. CRITICAL: All Stripe instances must use the canonical helper to ensure consistent API version (STRIPE_API_VERSION env var)."
          }
        ]
      }
    ],
    "no-module-scope-supabase": "warn"
  },
  "overrides": [
    {
      "files": [
        "lib/supabase/**/*.{ts,tsx}",
        "lib/stripe/**/*.{ts,tsx}"
      ],
      "rules": {
        "no-restricted-imports": "off"
      }
    },
    {
      "files": [
        "components/background/*.tsx",
        "components/home/*.tsx",
        "components/ui/*.tsx",
        "components/skillsmith/*.tsx"
      ],
      "rules": {
        "react-hooks/exhaustive-deps": "off"
      }
    },
    {
      "files": [
        "lib/3d/*.{ts,tsx}",
        "lib/performance/*.ts"
      ],
      "rules": {
        "react/display-name": "off",
        "@next/next/no-assign-module-variable": "off",
        "import/no-anonymous-default-export": "off",
        "react-hooks/exhaustive-deps": "off"
      }
    }
  ]
}
