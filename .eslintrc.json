{
  "extends": [
    "next/core-web-vitals",
    "eslint:recommended"
  ],
  "rules": {
    "no-unused-vars": "off",
    "no-undef": "error",
    "react/no-unescaped-entities": "off",
    "@next/next/no-img-element": "off",
    "jsx-a11y/alt-text": "warn",
    "jsx-a11y/aria-props": "warn",
    "jsx-a11y/aria-proptypes": "warn",
    "jsx-a11y/aria-unsupported-elements": "warn",
    "jsx-a11y/role-has-required-aria-props": "warn",
    "jsx-a11y/role-supports-aria-props": "warn",
    "no-restricted-imports": [
      "error",
      {
        "paths": [
          { "name": "components/legacy/*", "message": "Legacy components are disallowed in v2." },
          { "name": "archived-app/*", "message": "Archived app code is disallowed in v2." },
          { "name": "@/archived-app/*", "message": "Archived app code is disallowed in v2." },
          { "name": "utils/*", "message": "Generic utils are disallowed in v2. Use canonical modules." },
          { "name": "@/utils/*", "message": "Generic utils are disallowed in v2. Use canonical modules." },
          { "name": "utils/supabase", "message": "Use @/lib/supabase canonical helpers instead" },
          { "name": "utils/supabase-helpers", "message": "Use @/lib/supabase canonical helpers instead" },
          { "name": "@/utils/supabase", "message": "Use @/lib/supabase canonical helpers instead" },
          { "name": "@/utils/supabase-helpers", "message": "Use @/lib/supabase canonical helpers instead" },
          { "name": "featureFlags.ts", "message": "Feature flags are not allowed in v2." },
          { "name": "@/lib/config/featureFlags", "message": "Feature flags are not allowed in v2." }
        ],
        "patterns": [
          {
            "group": ["@supabase/supabase-js"],
            "importNames": ["createClient"],
            "message": "Direct @supabase/supabase-js imports are not allowed outside of lib/supabase/**. Use getBrowserSupabase(), getServerSupabaseAnon(), or getServerSupabaseAdmin() from @/lib/supabase instead."
          }
        ]
      }
    ]
  },
  "overrides": [
    {
      "files": [
        "lib/supabase/**/*.{ts,tsx}"
      ],
      "rules": {
        "no-restricted-imports": "off"
      }
    },
    {
      "files": [
        "components/background/*.tsx",
        "components/home/*.tsx",
        "components/ui/*.tsx",
        "components/skillsmith/*.tsx"
      ],
      "rules": {
        "react-hooks/exhaustive-deps": "off"
      }
    },
    {
      "files": [
        "app/v2/**/*.{ts,tsx}"
      ],
      "rules": {
        "no-restricted-imports": [
          "error",
          {
            "patterns": [
              {
                "group": [
                  "components/legacy/**",
                  "archived-app/**",
                  "@/archived-app/**",
                  "utils/**",
                  "@/utils/**",
                  "**/featureFlags.ts",
                  "@/lib/config/featureFlags"
                ],
                "message": "v2 must not import legacy, archived, utils, or feature flags."
              },
              {
                "group": [
                  "@/lib/**"
                ],
                "message": "Only allow @/lib/supabase and @/lib/stripe/** in v2."
              }
            ],
            "paths": [
              { "name": "@/lib/supabase" },
              { "name": "@/lib/stripe/stripe" },
              { "name": "@/lib/stripe/priceResolver" },
              { "name": "@/components/v2/*" }
            ]
          }
        ]
      }
    },
    {
      "files": [
        "lib/3d/*.{ts,tsx}",
        "lib/performance/*.ts"
      ],
      "rules": {
        "react/display-name": "off",
        "@next/next/no-assign-module-variable": "off",
        "import/no-anonymous-default-export": "off",
        "react-hooks/exhaustive-deps": "off"
      }
    }
  ]
}
